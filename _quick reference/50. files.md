# C File I/O Quick Reference

## Opening and Closing Files

```c
FILE *fp = fopen("filename.txt", "mode");
if (fp == NULL) {
    printf("Error opening file");
    return 1;
}
fclose(fp);
```

## File Modes

- `"r"` - read (file must exist)
- `"w"` - write (creates/truncates)
- `"a"` - append (creates if doesn't exist)

## Reading

### Character by character:

```c
int ch;
while (1) {
    ch = fgetc(fp);
    if (ch == EOF) {break;}
    putchar(ch);
}
```

### Line by line:

```c
char buffer[256];
while (fgets(buffer, sizeof(buffer), fp) != NULL) {
    printf("%s", buffer);
}
```

### Formatted input:

```c
int num;
char str[50];
fscanf(fp, "%d %s", &num, str);
```

## Writing

### Character:

```c
fputc('A', fp);
```

### String:

```c
fputs("Hello\n", fp);
```

### Formatted output:
```c
fprintf(fp, "Value: %d\n", 42);
```

## Common Patterns

### Read entire file to string:

```c
fseek(fp, 0, SEEK_END);
long size = ftell(fp);
fseek(fp, 0, SEEK_SET);

char *content = malloc(size + 1);
fread(content, 1, size, fp);
content[size] = '\0';
```

### Copy file:

```c
int ch;
FILE *src = fopen("input.txt", "r");
FILE *dst = fopen("output.txt", "w");
while ((ch = fgetc(src)) != EOF) {
    fputc(ch, dst);
}
```